# Hystrix Global Configuration
# Circuit Breaker 전역 설정

# Default Command Properties
# 기본 Circuit Breaker 설정
hystrix.command.default.circuitBreaker.enabled=true
hystrix.command.default.circuitBreaker.requestVolumeThreshold=20
hystrix.command.default.circuitBreaker.sleepWindowInMilliseconds=5000
hystrix.command.default.circuitBreaker.errorThresholdPercentage=50
hystrix.command.default.circuitBreaker.forceOpen=false
hystrix.command.default.circuitBreaker.forceClosed=false

# Execution Properties
# 실행 관련 설정
hystrix.command.default.execution.isolation.strategy=THREAD
hystrix.command.default.execution.isolation.thread.timeoutInMilliseconds=5000
hystrix.command.default.execution.timeout.enabled=true
hystrix.command.default.execution.isolation.thread.interruptOnTimeout=true
hystrix.command.default.execution.isolation.thread.interruptOnCancel=false

# Fallback Properties
# Fallback 설정
hystrix.command.default.fallback.enabled=true
hystrix.command.default.fallback.isolation.semaphore.maxConcurrentRequests=10

# Request Context Properties
# Request Context 설정
hystrix.command.default.requestCache.enabled=true
hystrix.command.default.requestLog.enabled=true

# Metrics Properties
# 메트릭 설정
hystrix.command.default.metrics.rollingStats.timeInMilliseconds=10000
hystrix.command.default.metrics.rollingStats.numBuckets=10
hystrix.command.default.metrics.rollingPercentile.enabled=true
hystrix.command.default.metrics.rollingPercentile.timeInMilliseconds=60000
hystrix.command.default.metrics.rollingPercentile.numBuckets=6
hystrix.command.default.metrics.rollingPercentile.bucketSize=100
hystrix.command.default.metrics.healthSnapshot.intervalInMilliseconds=500

# ThreadPool Properties
# 스레드풀 기본 설정
hystrix.threadpool.default.coreSize=10
hystrix.threadpool.default.maximumSize=10
hystrix.threadpool.default.maxQueueSize=100
hystrix.threadpool.default.queueSizeRejectionThreshold=80
hystrix.threadpool.default.keepAliveTimeMinutes=1
hystrix.threadpool.default.allowMaximumSizeToDivergeFromCoreSize=false

# Specific Command Groups Configuration
# 특정 명령어 그룹별 설정 예시

# External API Service Group
hystrix.command.ExternalAPIService.circuitBreaker.requestVolumeThreshold=15
hystrix.command.ExternalAPIService.circuitBreaker.sleepWindowInMilliseconds=3000
hystrix.command.ExternalAPIService.circuitBreaker.errorThresholdPercentage=40
hystrix.command.ExternalAPIService.execution.isolation.thread.timeoutInMilliseconds=3000

# Database Service Group
hystrix.command.DatabaseService.circuitBreaker.requestVolumeThreshold=25
hystrix.command.DatabaseService.circuitBreaker.sleepWindowInMilliseconds=10000
hystrix.command.DatabaseService.circuitBreaker.errorThresholdPercentage=60
hystrix.command.DatabaseService.execution.isolation.thread.timeoutInMilliseconds=8000

# Fast Service Group (빠른 응답이 필요한 서비스)
hystrix.command.FastService.circuitBreaker.requestVolumeThreshold=5
hystrix.command.FastService.circuitBreaker.sleepWindowInMilliseconds=2000
hystrix.command.FastService.circuitBreaker.errorThresholdPercentage=30
hystrix.command.FastService.execution.isolation.thread.timeoutInMilliseconds=1000

# ThreadPool Configurations for Specific Groups
# 특정 그룹별 스레드풀 설정

# External API ThreadPool
hystrix.threadpool.ExternalAPIService.coreSize=15
hystrix.threadpool.ExternalAPIService.maximumSize=20
hystrix.threadpool.ExternalAPIService.maxQueueSize=50
hystrix.threadpool.ExternalAPIService.queueSizeRejectionThreshold=40

# Database ThreadPool
hystrix.threadpool.DatabaseService.coreSize=5
hystrix.threadpool.DatabaseService.maximumSize=8
hystrix.threadpool.DatabaseService.maxQueueSize=200
hystrix.threadpool.DatabaseService.queueSizeRejectionThreshold=150

# Hystrix Dashboard Configuration
# Hystrix 대시보드 설정 (모니터링용)
hystrix.dashboard.enableIgnoreConnectionCloseHeader=true
hystrix.stream.maxConcurrentConnections=50

# Logging Configuration
# 로깅 설정
hystrix.command.default.requestLog.enabled=true
hystrix.shareSecurityContext=true

# Collapser Properties (요청 일괄 처리)
# Request Collapser 설정
hystrix.collapser.default.maxRequestsInBatch=2147483647
hystrix.collapser.default.timerDelayInMilliseconds=10
hystrix.collapser.default.requestCache.enabled=true